#pragma once

//==============================================================================================================
#if defined(LOGGER)
//==============================================================================================================

#define ON_LOGGER(...) __VA_ARGS__

//---------------------------------------------------------------------------------------------------------------

#include "global/global.hpp"
#include "spdlog/spdlog.h"

import pineaplog;

//---------------------------------------------------------------------------------------------------------------

#define HTMLCOLLOG(color, ...) PineapLog::glog.logc(color, __VA_ARGS__)
#define HTMLLOG(...) PineapLog::glog.log(__VA_ARGS__)

#define LOGFLUSH (spdlog::get("global"))->flush()

#define LOGINFO(...)                                                                                                   \
    do                                                                                                                 \
    {                                                                                                                  \
        SPDLOG_INFO(__VA_ARGS__);                                                                                      \
        ON_DEBUG(LOGFLUSH;)                                                                                            \
    } while (0)

#define LOGERR(...)                                                                                                    \
    do                                                                                                                 \
    {                                                                                                                  \
        SPDLOG_ERROR(__VA_ARGS__);                                                                                     \
        LOGFLUSH;                                                                                                      \
    } while (0)

//==============================================================================================================
#else /* defined(LOGGER)*/
//==============================================================================================================

#define ON_LOGGER(...)

//---------------------------------------------------------------------------------------------------------------

#define HTMLCOLLOG(...)
#define HTMLLOG(...)

#define LOGFLUSH

#define LOGINFO(...)
#define LOGERR(...)

//==============================================================================================================
#endif /* defined(LOGGER) */
//==============================================================================================================
