#pragma once

//---------------------------------------------------------------------------------------------------------------

#if defined(LOGGER)

//---------------------------------------------------------------------------------------------------------------

#define ON_LOGGER(...) __VA_ARGS__

//---------------------------------------------------------------------------------------------------------------

import pineaplog;
#include "global/global.hpp"
#include "spdlog/spdlog.h"

//---------------------------------------------------------------------------------------------------------------

#define HTMLCOLLOG(color, ...) PineapLog::glog.logc(color, __VA_ARGS__)
#define HTMLLOG(...) PineapLog::glog.log(__VA_ARGS__)

#define LOGFLUSH (spdlog::get("global"))->flush();

#define LOGINFO(...)                                                                                                   \
    do                                                                                                                 \
    {                                                                                                                  \
        SPDLOG_INFO(__VA_ARGS__);                                                                                      \
        ON_DEBUG(LOGFLUSH);                                                                                            \
    } while (0)
#define LOGERR(...)                                                                                                    \
    do                                                                                                                 \
    {                                                                                                                  \
        SPDLOG_ERROR(__VA_ARGS__);                                                                                     \
        ON_DEBUG(LOGFLUSH);                                                                                            \
    } while (0)

//---------------------------------------------------------------------------------------------------------------

#else /* defined(LOGGER)*/

//---------------------------------------------------------------------------------------------------------------

#define ON_LOGGER(...)

//---------------------------------------------------------------------------------------------------------------

#define HTMLCOLLOG(...)
#define HTMLLOG(...)

#define LOGINFO(...)
#define LOGERR(...)

//---------------------------------------------------------------------------------------------------------------

#endif /* defined(LOGGER) */

//---------------------------------------------------------------------------------------------------------------
